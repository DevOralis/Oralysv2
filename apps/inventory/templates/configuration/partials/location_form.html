{% if request.session.user.permissions.inventory.write %}
<div class="card form-card mb-4 mt-4 p-0 d-none" id="location-form-card" style="scroll-margin-top: 120px;">
  <div class="card-header card-header-primary">
    <i class="fa-solid fa-pen-to-square me-2"></i>
    <span id="location-form-title">Ajouter un emplacement</span>
  </div>
  <div class="card-body">
    <form method="post" id="location-form" action="{% url 'location_add' %}">
      {% csrf_token %}
      <input type="hidden" name="id" value="">
      <div class="row g-3">
        <div class="col-md-6 form-label">
          <label class="form-label">Nom :</label>
          <input type="text" name="name" class="form-control" required placeholder="Entrez le nom de l'emplacement" title="Nom de l'emplacement">
        </div>
        <div class="col-md-6 form-label">
          <label class="form-label">Type :</label>
          <select name="location_type" class="form-select" required title="Type d'emplacement">
            <option value="">Choisir un type</option>
            {% for t in location_types %}
            <option value="{{ t.location_type_id }}">{{ t.label }}</option>
            {% endfor %}
          </select>
        </div>
        <div class="col-md-6 form-label d-flex align-items-end">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="is-parent-toggle" name="is_parent">
            <label class="form-check-label" for="is-parent-toggle">Est un emplacement racine</label>
          </div>
        </div>
        <div id="parent-location-group" class="col-md-6 form-label">
          <label class="form-label" for="parent-location-select">Parent :</label>
          <select id="parent-location-select" name="parent_location" class="form-select">
            <option value="">Choisir un parent</option>
            {% for p in location_parents %}
            <option value="{{ p.location_id }}">{{ p.name }}</option>
            {% endfor %}
          </select>
        </div>
      </div>
      <div class="mt-3 text-end">
        <button type="button" class="btn btn-secondary btn-sm btn-cancel-form"><i class="fas fa-times"></i> <span class="d-none d-sm-inline ms-1"> Annuler</span></button>
        <button type="submit" class="btn btn-primary btn-sm"><i class="fas fa-save"></i> <span class="d-none d-sm-inline ms-1"> Sauvegarder</span></button>
      </div>
    </form>
  </div>
</div>
{% endif %}