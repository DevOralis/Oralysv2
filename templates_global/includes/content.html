<div class="content">
  {# Graphique #}
  <div class="chart-card">
    <h5>Nouveaux Fournisseurs (6 derniers mois)</h5>
    <canvas id="suppliersChart"></canvas>
  </div>

  {# Tableau #}
  <div class="table-card">
    <div class="actions d-flex justify-content-between mb-3">
      <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#modalSupplier">
        <i class="fas fa-plus"></i> Nouveau Fournisseur
      </button>
      <input type="search" class="form-control w-25" placeholder="Rechercher fournisseur...">
    </div>
    <div class="table-responsive">
      <table class="table table-hover">
        <thead class="table-light">
          <tr><th>Nom</th><th>Email</th><th>Téléphone</th><th>Adresse</th><th>Actions</th></tr>
        </thead>
        <tbody>
          {% for supplier in suppliers %}
          <tr>
            <td>{{ supplier.name }}</td>
            <td>{{ supplier.email }}</td>
            <td>{{ supplier.phone }}</td>
            <td>{{ supplier.address }}</td>
            <td>
              <a href="{% url 'supplier_edit' supplier.id %}" class="btn btn-sm btn-light border"><i class="fas fa-edit"></i></a>
              <a href="{% url 'supplier_delete' supplier.id %}" class="btn btn-sm btn-light border text-danger"><i class="fas fa-trash-alt"></i></a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  {# Formulaire #}
  <div class="form-card">
    <h5>Détails Fournisseur</h5>
    <form id="supplierForm" method="post">
      {% csrf_token %}
      <div class="row g-3">
        <div class="col-md-6">
          <label class="form-label" for="id_name">Nom</label>
          <input type="text" class="form-control" id="id_name" name="name" value="{{ form.name.value }}" required>
        </div>
        <div class="col-md-6">
          <label class="form-label" for="id_email">Email</label>
          <input type="email" class="form-control" id="id_email" name="email" value="{{ form.email.value }}">
        </div>
        <div class="col-md-4">
          <label class="form-label" for="id_phone">Téléphone</label>
          <input type="tel" class="form-control" id="id_phone" name="phone" value="{{ form.phone.value }}">
        </div>
        <div class="col-md-8">
          <label class="form-label" for="id_address">Adresse</label>
          <textarea class="form-control" id="id_address" name="address">{{ form.address.value }}</textarea>
        </div>
        <div class="col-md-4">
          <label class="form-label" for="id_city">Ville</label>
          <select class="form-select" id="id_city" name="city">
            {% for city in cities %}<option value="{{ city }}">{{ city }}</option>{% endfor %}
          </select>
        </div>
        <div class="col-md-4">
          <label class="form-label" for="id_country">Pays</label>
          <select class="form-select" id="id_country" name="country">
            {% for country in countries %}<option value="{{ country }}">{{ country }}</option>{% endfor %}
          </select>
        </div>
        <div class="col-md-4">
          <label class="form-label">Statut</label>
          <div class="form-check">
            <input class="form-check-input" type="radio" id="statusActive" name="status" value="active" {% if form.status.value == 'active' %}checked{% endif %}>
            <label class="form-check-label" for="statusActive">Actif</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" id="statusInactive" name="status" value="inactive" {% if form.status.value == 'inactive' %}checked{% endif %}>
            <label class="form-check-label" for="statusInactive">Inactif</label>
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="certified" name="certified" {% if form.certified.value %}checked{% endif %}>
            <label class="form-check-label" for="certified">Certifié</label>
          </div>
        </div>
      </div>
      <div class="mt-4 text-end">
        <button type="reset" class="btn btn-secondary me-2">Annuler</button>
        <button type="submit" class="btn btn-success">Enregistrer</button>
      </div>
    </form>
  </div>
</div>
